<div class="row top-bar">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-3">
                <h1>My money</h1>
            </div>
            <div class="col-xs-4 col-sm-3">
                <a ng-href="{{ $state.href('wallet.pay') }}" ng-class="{ unblocked: $state.is('wallet.pay') }" class="btn btn-call btn-block">Pay</a>
            </div>
            <div class="col-xs-4 col-sm-3">
                <a ng-href="{{ $state.href('wallet.withdraw') }}" ng-class="{ unblocked: $state.is('wallet.withdraw') }" class="btn btn-call btn-block">Withdraw</a>
            </div>
            <div class="col-xs-4 col-sm-3">
                <a ng-href="{{ $state.href('wallet.deposit') }}" ng-class="{ unblocked: $state.is('wallet.deposit') }" class="btn btn-call btn-block">Deposit</a>
            </div>
        </div>
    </div>
</div>

<div class="task-pay">
    <div class="clearfix" collapse="!blockUI">
        <div ui-view="pay"></div>
    </div>
</div>

<div class="row top-info">
    <div class="container">
        <div class="row">
            <div class="col-md-12" ng-click="$state.go('wallet')" collapse="$state.is('wallet')">
                <h2>Total balance: <span ng-bind-html="dashboard.result.total_amount | mobbrcurrency:dashboard.result.total_currency_iso:true"></span></h2>
            </div>

            <div class="col-md-12" collapse="!$state.is('wallet')">
                <div class="row cards-wrapper">

                    <div class="card-container col-xs-6 col-sm-3">
                        <div class="card fixed">
                            <div class="front">
                                <div class="row">
                                    <small class="col-md-12">Total balance</small>
                                </div>
                                <div class="row">
                                    <span class="txt col-md-12" ng-bind-html="dashboard.result.total_amount | mobbrcurrency:'':true"></span>
                                </div>
                                <div class="row">
                                    <span class="txt big col-md-12" ng-bind="dashboard.result.total_currency_iso"></span>
                                </div>
                                <div class="row bottom">
                                    <div class="col-md-12">
                                        <button ng-click="$state.go('settings.display')" class="btn btn-block">
                                            Change currency
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card-container col-xs-6 col-sm-3" ng-repeat="balance in dashboard.result.balances">
                        <div class="card">
                            <div class="front">
                                <div class="row">
                                    <small class="col-md-12">Spendable</small>
                                </div>
                                <div class="row">
                                    <span class="txt col-md-12" ng-bind-html="balance.spendable | mobbrcurrency:'':true"></span>
                                </div>
                                <div class="row">
                                    <span class="txt big col-md-12" ng-bind="balance.currency_iso"></span>
                                </div>
                                <div class="row">
                                    <small class="col-md-12" ng-bind="balance.currency_description"></small>
                                </div>
                            </div>
                            <div class="back">
                                <div class="row">
                                    <small class="first col-md-12">
                                        Last updated <time am-time-ago="balance.updatedatetime" datetime="{{ balance.updatedatetime }}"></time>

                                    </small>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <small class="pull-left">Amount</small>
                                        <span class="txt pull-right" ng-bind-html="balance.amount | mobbrcurrency:'':true"></span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12 text-warning">
                                        <small class="pull-left">Fee</small>
                                        <span class="txt pull-right" ng-bind-html="balance.fee | mobbrcurrency:'':true"></span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12 text-success">
                                        <small class="pull-left">Converted amount </small>
                                        <span class="txt pull-right" ng-bind-html="balance.converted_amount | mobbrcurrency:currenciesMap[dashboard.result.total_currency_iso].currency_iso:true"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <accordion state-accordion="wallet">
        <accordion-group is-open="stateAccordion['wallet.x-payments']" is-disabled="true">
            <accordion-heading>
                <div class="container">
                    <div class="row">
                        <div class="col-xs-10 title" ng-click="$state.is('wallet.x-payments') ? $state.go('^') : $state.go('wallet.x-payments')">
                            <span class="glyphicon glyphicon-ok"></span>
                            <strong>Deposits & withdrawls</strong></a>
                        </div>
                        <div class="icons">
                            <div class="col-xs-1 text-center icon">
                                <span class="glyphicon glyphicon-info-sign"></span>
                            </div>
                            <div class="col-xs-1 text-center icon" ng-click="$state.is('wallet.x-payments') ? $state.go('^') : $state.go('wallet.x-payments')">
                                <span ng-class="$state.is('wallet.x-payments') ? 'glyphicon-minus' : 'glyphicon-plus'" class="glyphicon"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </accordion-heading>
            <div ng-include="'views/xpayments.html'"></div>
        </accordion-group>
        <accordion-group is-open="stateAccordion['wallet.addresses']" is-disabled="true">
            <accordion-heading>
                <div class="container">
                    <div class="row">
                        <div class="col-xs-10 title" ng-click="$state.is('wallet.addresses') ? $state.go('^') : $state.go('wallet.addresses')">
                            <span class="glyphicon glyphicon-ok"></span>
                            <strong>Wallet addresses</strong>
                        </div>
                        <div class="icons">
                            <div class="col-xs-1 text-center icon">
                                <span class="glyphicon glyphicon-info-sign"></span>
                            </div>
                            <div class="col-xs-1 text-center icon" ng-click="$state.is('wallet.addresses') ? $state.go('^') : $state.go('wallet.addresses')">
                                <span ng-class="$state.is('wallet.addresses') ? 'glyphicon-minus' : 'glyphicon-plus'" class="glyphicon"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </accordion-heading>
            <div ng-include="'views/addresses.html'"></div>
        </accordion-group>
    </accordion>
</div>