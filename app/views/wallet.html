<div class="alert alert-info" ng-hide="userSession.authenticated">
    The dashboard is empty because you are not logged in. To login or signup, go <a href="#/join">here</a>.
</div>
<tabs>
<pane heading="Payments">
    <div class="row-fluid">
        <div class="well span12 special">
            <small>Payment you made or received.</small>
        </div>
    </div>

    <div class="form-inline" style="margin-bottom: 20px;">
        <label for="searchEntries{{paymenttype}}">Search: </label>
        <input type="search" class="search-query" ng-model="searchentries" id="searchEntries{{paymenttype}}" >
    </div>

    <accordion close-others="false">
        <accordion-group heading="Since last logout" is-open="true">
            <payments nodatatitle="No payments since last logout"
                      paymenttype="new_payments"
                      editable="false"
                      searchentries="searchentries"
                      showexpiresdate="false"></payments>
        </accordion-group>
        <accordion-group heading="Historic payments" is-open="true">
            <payments nodatatitle="No payments"
                      searchentries="searchentries"
                      paymenttype="payments"
                      editable="false"
                      showexpiresdate="false"></payments>
        </accordion-group>
    </accordion>
</pane>
<pane heading="Balances">
    <div class="row-fluid">
        <div class="well span12 special">
            <small>Your credit and external payments.</small>
        </div>
    </div>

    <div class="pull-right btn-toolbar" style="margin: 0;">
        <div class="btn-group">
            <button class="btn" ng-click="depositDialog.open()">Deposit</button>
        </div>
        <div class="btn-group">
            <button class="btn" ng-click="withdrawDialog.open()">Withdraw</button>
        </div>
    </div>

    <div class="form-inline" class="pull-left" style="margin-bottom: 20px;">
        <label for="searchBalanceEntries">Search: </label>
        <input type="search" class="search-query" ng-model="searchBalanceEntries" id="searchBalanceEntries" >
    </div>

    <accordion close-others="false">
        <accordion-group heading="Total credit" is-open="true">

            <table class="table table-striped" ng-show="balances.length > 0">
                <thead>
                <tr>
                    <th>Currency description</th>
                    <th ng-click="sortBalance('currency_iso')">Currency</th>
                    <th ng-click="sortBalance('amount')">Total</th>
                    <th ng-click="sortBalance('fee')">Fee</th>
                    <th ng-click="sortBalance('spendable')">Spendable</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="balance in balances | orderBy:sortEntries:sortOrderBalance | filter:searchBalanceEntries"  ng-class-odd="'odd'" ng-class-even="'even'">
                    <td ng-bind="currencyDescription(balance.currency_iso)"></td>
                    <td ng-bind="balance.currency_iso" class="currency"></td>
                    <td ng-bind="balance.amount" class="amount decorate-amount"></td>
                    <td ng-bind="balance.fee" class="amount decorate-amount"></td>
                    <td ng-bind="balance.spendable" class="amount decorate-amount"></td>
                </tr>
                </tbody>
            </table>

            <div ng-show="balances.length == 0">
                No balances found
            </div>
        </accordion-group>
        <accordion-group heading="Deposits and withdraws" is-open="true">
            <table class="table table-striped" ng-show="mutations.length >0">
                <thead>
                <tr>
                    <th ng-click="sortPayments('paiddatetime')">date</th>
                    <th ng-click="sortPayments('payment_service')" >Provider</th>
                    <th ng-click="sortPayments('currency_iso')">Currency</th>
                    <th ng-click="sortPayments('amount')">Amount</th>
                    <th ng-click="sortPayments('receive_address')" colspan="2">Address</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="mutation in mutations | orderBy:sortEntries:sortOrderPayments | filter:searchBalanceEntries"  ng-class-odd="'odd'" ng-class-even="'even'">
                    <td ng-click="openExternalPayment(mutation.id)" ng-bind="mutation.paiddatetime || mutation.announceddatetime" class="datetime {{ !mutation.paiddatetime && 'muted' }}"></td>
                    <td ng-click="openExternalPayment(mutation.id)" ng-bind="mutation.payment_service"></td>
                    <td ng-bind="mutation.currency_iso" class="currency"></td>
                    <td ng-bind="mutation.amount" class="amount decorate-amount"></td>
                    <td ng-bind="mutation.receive_address" colspan="2"></td>
                </tr>
                </tbody>
            </table>
            <div ng-show="mutations.length == 0">
                No transactions found
            </div>
        </accordion-group>
    </accordion>
</pane>
<pane heading="Addresses">
    <div class="row-fluid">
        <div class="well span12 special">
            <small>Use these public addresses to receive money from external accounts. Give these to anyone who needs to fund your Mobbr account.</small>
        </div>
    </div>
    <form class="form-horizontal">
        <div ng-repeat="(currency, addresses) in supportedCurrencies">

            <accordion close-others="false">
                <accordion-group heading="{{currency}} / {{currencyDescription(currency)}}" is-open="false">
                    <div ng-repeat="properties in addresses">
                        <div style="padding-bottom:10px;" ng-repeat="(property,value) in properties" class="controls-row">

                            <label ng-bind="property" class="control-label">

                            </label>
                            <div class="controls">
                                <input type="text" disabled="disabled" ng-model="value" class="input-xxlarge"/>
                            </div>

                        </div>
                    </div>
                    <div class="controls" ng-show="currency == 'BTC'">
                        <button ng-click="generateAddress(currency)"
                                ng-disabled=""
                                type="submit"
                                class="btn btn-success">
                            <i class="icon-white mobbrloader" ng-show=""></i>
                            Generate extra address
                        </button>
                    </div>
                </accordion-group>
            </accordion>
        </div>
        </div>
    </form>

</pane>
</tabs>

