<fieldset>
    <form ng-submit="gotoUrl(query)" ng-class="{ grayquery: (activeQuery && activeQuery == query && !savedQuery) }" class="input-group">
        <span class="input-group-addon" ng-mouseover="isopen = true" ng-mouseleave="isopen = false">
            <span class="mobbricon mobbricon-mobbrmenu"></span>
        </span>
        <input type="{{ (urlType == 'CROWDS' || urlType == 'TASK') && 'url' || 'text' }}"
               pattern="{{ !(urlType == 'CROWDS' || urlType == 'TASK') && '^[A-Za-z0-9_-]{4,32}$' || '.*' }}"
               class="form-control"
               ng-model="query"
               placeholder="{{placeHolders[urlType]}}"
               ng-focus="isfocus = true"
               ng-blur="isfocus = false">
        <span class="input-group-btn guide">
            <span ng-class="{ 'mobbricon-person': urlType == 'TASKS' || urlType == 'PROFILE', 'mobbricon-domain': urlType == 'TASK' || urlType == 'CROWDS' }" class="mobbricon"></span>
        </span>
        <span class="input-group-btn border">
            <button ng-disabled="(activeQuery && activeQuery == query) || !query"
                    class="btn btn-default"
                    type="submit">
                <span class="mobbricon mobbricon-mobbricon"></span>
            </button>
        </span>
    </form>
    <ul class="list-unstyled query-menu logo-menu" ng-show="isopen" role="menu" ng-mouseover="isopen = true" ng-mouseleave="isopen = false">
        <li>
            <a ng-click="isopen = false;" ui-sref="box.task"><span class="mobbricon mobbricon-settings"></span> Create and manage task</a>
        </li>
        <li>
            <a ng-click="isopen = false" ui-sref="box.crowds"><span class="mobbricon mobbricon-crowd"></span> Find and invite crowdworkers</a>
        </li>
        <li>
            <a ng-click="isopen = false;" ui-sref="box.tasks"><span class="mobbricon mobbricon-digger"></span> Find new tasks</a>
        </li>
        <li>
            <a ng-click="isopen = false;" ui-sref="box.person"><span class="mobbricon mobbricon-person"></span> Find person</a>
        </li>
        <li ng-show="mobbrSession.isAuthorized()">
            <a ng-click="isopen = false;" ui-sref="box.tasks.person({ username: user.username })"><img ng-src="{{ user.thumbnail }}"  width="32" height="32"> My tasks</a>
        </li>
    </ul>
</fieldset>