<div class="row">
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <h1 ng-bind="state.current.data.title"></h1>
            </div>
            <div ng-if="state.includes('tasks.view.task')" class="col-md-6 text-right">
                <a ng-disabled="!url"
                   ng-href="{{ url }}"
                   class="btn btn-default"
                   target="_blank">Go to task</a>
                <a ng-disabled="!task.result.script.url"
                   ng-href="{{ state.href('tasks.view.task.pay') }}"
                   ng-bind="'Make a ' + (task.result.script.type == 'donate' ? 'pledge' : 'payment')"
                   class="btn btn-primary">Make a pledge</a>
            </div>
            <div ng-if="state.is('tasks')" class="col-md-6 text-right">
                <button type="button" class="btn btn-primary">Create a task</button>
            </div>
        </div>
    </div>
</div>

<div ui-view="pay" class="row" class="task-pay"></div>

<div class="row">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <fieldset ng-disabled="(tasks && !tasks.$resolved) || (tags && !tags.$resolved) || (task && !task.$resolved)">
                    <form ng-submit="setTask(query)" class="input-group">
                        <span class="input-group-addon">=</span>
                        <input type="url" class="form-control" ng-model="query" required>
                        <span class="input-group-btn">
                            <button ng-disabled="query == task.result.script.url"
                                    ng-class="{ loading: task && !task.$resolved }"
                                    class="btn btn-default"
                                    type="submit">Go!</button>
                        </span>
                    </form>
                </fieldset>
            </div>
        </div>
    </div>
</div>

<div ui-view="tasks-section" ng-class="{ loading: task && !task.$resolved }"></div>
