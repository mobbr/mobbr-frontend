<div class="alert alert-info" ng-hide="userSession.authenticated">
    The work board is empty because you are not logged in. To login or signup, go <a href="#/join">here</a>.
</div>
<tabs>
    <pane heading="Confirm invoices">
        <div class="row-fluid">
            <div class="well span12 special">
                <small>Confirm the data on the invoices your clients request. After 30 days if possible an invoice using your default data will be generated else the payment will be refunded.</small>
            </div>
        </div>
        <accordion close-others="false">
            <accordion-group heading="Invoices that need verification" is-open="true">
                <invoicetable data="working" action="'requested'" button-text="'Confirm invoices'"></invoicetable>
            </accordion-group>
        </accordion>
    </pane>
    <pane heading="Download invoices">
        <div class="row-fluid">
            <div class="well span12 special">
                <small>Your invoices. We generated these on request of your clients.</small>
            </div>
        </div>
        <accordion close-others="false">
            <accordion-group heading="Invoices generated on your behalf" is-open="true">
                <invoicetable data="working" action="'reviewed'" button-text="'Download invoices'"></invoicetable>
            </accordion-group>
        </accordion>
    </pane>
    <pane heading="Tasks">
        <div class="row-fluid">
            <div class="well span12 special">
                <small>Tasks to which you can or did contribute.</small>
            </div>
        </div>
        <accordion close-others="false">
            <accordion-group heading="Suggested tasks" is-open="true">
            </accordion-group>
            <accordion-group heading="Historic tasks" is-open="true">
                <mobbrtable entries="urls.result"
                            columns="[ 'url', 'datetime', 'currency_iso', 'amount' ]"
                            has-search="true" has-header="true"></mobbrtable>
            </accordion-group>
        </accordion>
    </pane>
    <pane heading="Communities">
        <div class="row-fluid">
            <div class="well span12 special">
                <small>Communities to which you did or can contribute.</small>
            </div>
        </div>
        <accordion close-others="false">
            <accordion-group heading="Communities" is-open="true">
                <table ng-table="personParams" class="mobbrtable table table-striped table-checkbox">
                    <tbody ng-repeat="group in $groups">
                    <tr class="ng-table-group">
                        <td colspan="{{$columns.length}}">
                            <div ng-click="group.$hideRows = !group.$hideRows">
                                <span ng-class="{ 'icon-chevron-right': group.$hideRows, 'icon-chevron-down': !group.$hideRows }"></span>
                                <span ng-bind="group.value"></span>
                            </div>
                        </td>
                    </tr>
                    <tr ng-hide="group.$hideRows" ng-repeat="user in group.data" title="{{ user.title }}">
                        <td data-title="''">
                            <img ng-src="https://secure.gravatar.com/avatar/{{ user['gravatar'] }}?s=20&default=https://mobbr.com/img/default-gravatar.png"
                                 class="gravatar small img-rounded"
                                 width="20"
                                 height="20">
                        </td>
                        <td sortable="username" data-title="'Userame'" ng-bind="user.username"></td>
                        <td sortable="datetime"><small ng-bind="user.datetime"></small></td>
                        <td sortable="roles" data-title="'Role'" ng-bind="user.roles" class="roles"></td>
                        <td sortable="currency" data-title="'Currency'" ng-bind="userSession.user.currency_iso" class="currency"></td>
                        <td sortable="amount" data-title="'Amount'" class="amount">
                            <span ng-bind="user.amount | mobbrcurrency"
                                  ng-class="{ 'text-error': user.amount < 0 }"
                                  class="nowrap"></span>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </accordion-group>
        </accordion>
    </pane>
</tabs>

