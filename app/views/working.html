<div class="alert alert-info" ng-hide="userSession.authenticated">
    The work board is empty because you are not logged in. To login or signup, go <a href="#/join">here</a>.
</div>
<tabs>
    <pane heading="Tasks">
        <div class="row-fluid">
            <div class="well span12 special">
                <small>The tasks to which you contributed.</small>
            </div>
        </div>
        <mobbrtable entries="urls.result"
                    columns="[ 'url', 'datetime', 'currency_iso', 'amount' ]"
                    has-search="true" has-header="true"></mobbrtable>
    </pane>
    <pane heading="Communities">
        <div class="row-fluid">
            <div class="well span12 special">
                <small>The communities to which you contributed.</small>
            </div>
        </div>
        <table ng-table="personParams" class="mobbrtable table table-striped table-checkbox">
            <tbody ng-repeat="group in $groups">
            <tr class="ng-table-group">
                <td colspan="{{$columns.length}}">
                    <div ng-click="group.$hideRows = !group.$hideRows">
                        <span ng-class="{ 'icon-chevron-right': group.$hideRows, 'icon-chevron-down': !group.$hideRows }"></span>
                        <span ng-bind="group.value"></span>
                    </div>
                </td>
            </tr>
            <tr ng-hide="group.$hideRows" ng-repeat="user in group.data" title="{{ user.title }}">
                <td data-title="''">
                    <img ng-src="https://secure.gravatar.com/avatar/{{ user['gravatar'] }}?s=20&default=https://mobbr.com/img/default-gravatar.png"
                         class="gravatar small img-rounded"
                         width="20"
                         height="20">
                </td>
                <td sortable="username" data-title="'Userame'" ng-bind="user.username"></td>
                <td sortable="datetime"><small ng-bind="user.datetime"></small></td>
                <td sortable="roles" data-title="'Role'" ng-bind="user.roles" class="roles"></td>
                <td sortable="currency" data-title="'Currency'" ng-bind="userSession.user.currency_iso" class="currency"></td>
                <td sortable="amount" data-title="'Amount'" class="amount">
                    <span ng-bind="user.amount | mobbrcurrency"
                          ng-class="{ 'text-error': user.amount < 0 }"
                          class="nowrap"></span>
                </td>
            </tr>
            </tbody>
        </table>
    </pane>
    <pane heading="Invoicing">
        <div class="row-fluid">
            <div class="well span12 special">
                <small>A copy of the monthly invoices we sent on your behalf to the people who paid you.</small>
            </div>
        </div>

        <form name="invoicing" class="form-horizontal">

            <div class="control-group">
                <div class="control-label">
                    <label for="worker-name">Worker name</label>
                </div>

                <div class="controls">
                    <input ng-model="invoice.worker_name" name="worker_name" type="text" id="worker-name" placeholder="e.g. Google">
                </div>
            </div>

            <div class="control-group">
                <div class="control-label">
                    <label for="worker-name">Worker address</label>
                </div>

                <div class="controls">
                    <input ng-model="invoice.worker_address" name="worker_address" type="text" id="worker-address" placeholder="e.g. Sesame Street, Manhattan">
                </div>
            </div>

            <div class="control-group">
                <div class="control-label">
                    <label for="worker-country">Worker country</label>
                </div>

                <div class="controls">
                    <select id="worker-country" name="worker_country" ng-model="invoice.worker_country"
                            ng-options="value as key for (value, key) in countriesMap">
                        <option value="">No country</option>
                    </select>
                </div>
            </div>

            <div class="control-group">
                <div class="control-label">
                    <label for="worker-vat-number">Worker VAT-number</label>
                </div>

                <div class="controls">
                    <input ng-model="invoice.worker_vat_number" name="worker_vat_number" type="text" id="worker-vat-number" placeholder="e.g. NL001234567B01">
                </div>
            </div>

            <div class="control-group">
                <div class="control-label">
                    <label for="worker-vat-rate">Worker VAT-rate (%)</label>
                </div>

                <div class="controls">
                    <input ng-model="invoice.worker_vat_rate" name="worker_vat_rate" type="text" id="worker-vat-rate" placeholder="e.g. 21">
                </div>
            </div>

            <div class="control-group">
                <div class="control-label">
                    <label for="worker-status">Worker status</label>
                </div>

                <div class="controls">
                    <select ng-model="invoice.worker_status" name="worker_status" type="text" id="worker-status">
                        <option value="private">Private</option>
                        <option value="enterprise">Enterprise</option>
                    </select>
                </div>
            </div>
        </form>

        <invoicetable data="working" action="'requested'" button-text="'Confirm invoices'" button-action="confirmInvoices"></invoicetable>
        <invoicetable data="working" action="'reviewed'" button-text="'Download invoices'"></invoicetable>
    </pane>
</tabs>

