<div class="alert alert-info" ng-hide="userSession.authenticated">
    The source board is empty because you are not logged in. To login or signup, go <a href="#/join">here</a>.
</div>
<tabs>
    <pane heading="Request invoices">
        <div class="row-fluid">
            <div class="well span12 special">
                <small>Ask your crowdworkers for an invoice. They have 30 days to verify their data.
                    After 30 days we either generate the invoice on their behalf or refund the payment.</small>
            </div>
        </div>

        <accordion close-others="false">
            <accordion-group heading="Invoices that await verification" is-open="true">
                <invoicetable id="sourcing_requested_invoices"
                              columns="[ 'username', 'role', 'expiration', 'currency', 'amount' ]"
                              waiting="ciwaiting"
                              api="Sourcing.invoices"
                              action="'requested_invoices'"
                              group-by="'title'"
                              button-text="'Cancel request'"
                              button-action="cancelInvoices"
                              selectable="1"
                              click-row="openPayment"></invoicetable>
             </accordion-group>
            <accordion-group heading="Payments for which an invoice can be requested" is-open="true">
                <invoicetable id="sourcing_unrequested_invoices"
                              columns="[ 'username', 'role', 'currency', 'amount' ]"
                              api="Sourcing.invoices"
                              action="'unrequested_invoices'"
                              group-by="'title'"
                              button-text="'Request invoices'"
                              button-action="requestInvoices"
                              selectable="1"
                              click-row="openPayment"></invoicetable>
            </accordion-group>
        </accordion>
    </pane>
    <pane heading="Download invoices">
        <div class="row-fluid">
            <div class="well span12 special">
                <small>Your invoices. We generated these on behalf of your crowdworkers.</small>
            </div>
        </div>
        <accordion close-others="false">
            <accordion-group heading="Final invoices" is-open="true">
                <invoicetable id="sourcing_reviewed_invoices"
                              columns="[ 'worker_username', 'role', 'currency', 'amount' ]"
                              api="Sourcing.invoices"
                              action="'reviewed_invoices'"
                              group-by="'title'"
                              button-text="'Download invoice'"
                              button-action="downloadInvoices"
                              selectable="1"
                              click-row="openPayment"></invoicetable>
            </accordion-group>
        </accordion>
    </pane>
    <pane heading="Pledges and tasks">
        <div class="row-fluid">
            <div class="well span12 special">
                <small>Tasks to which you pledged or paid. Pledges can be revoked but every currently listed participant to the taks will be notified which can hurt your reputation.</small>
            </div>
        </div>

        <accordion close-others="false">
            <accordion-group heading="Active pledges" is-open="true">
                <invoicetable id="sourcing_pledges"
                              columns="[ 'title', 'currency', 'amount' ]"
                              api="Dashboard.getPayments"
                              action="'unclaimed_payments'"
                              group-by="'title'"
                              button-text="'Remove pledges'"
                              button-action="removePledgesDialog"
                              selectable="1"
                              click-row="openPayment"></invoicetable>
            </accordion-group>
            <accordion-group heading="Historic tasks" is-open="true">
                <invoicetable id="sourcing_tasks"
                              columns="[ 'gravatar', 'username', 'datetime', 'role', 'currency', 'amount' ]"
                              api="Sourcing.urls"
                              group-by="'title'"></invoicetable>
            </accordion-group>
        </accordion>
    </pane>
    <pane heading="Workers">
        <div class="row-fluid">
            <div class="well span12 special">
                <small>People who worked on your tasks.</small>
            </div>
        </div>
        <accordion close-others="false">
            <accordion-group heading="People you rewarded" is-open="true">
                <invoicetable id="sourcing_workers"
                              columns="[ 'gravatar', 'username', 'roles', 'keywords', 'currency', 'amount' ]"
                              api="Sourcing.persons"></invoicetable>
            </accordion-group>
        </accordion>
    </pane>
</tabs>

