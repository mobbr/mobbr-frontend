<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js ie ie6 lt-ie9 lt-ie8 lt-ie7" xmlns:ng="http://angularjs.org"> <![endif]-->
<!--[if IE 7]><html class="no-js ie ie7 lt-ie9 lt-ie8 lt-ie7" xmlns:ng="http://angularjs.org"> <![endif]-->
<!--[if IE 8]><html class="no-js ie ie8 lt-ie9 lt-ie8" xmlns:ng="http://angularjs.org"> <![endif]-->
<!--[if IE 9]><html class="no-js ie ie9 lt-ie9" xmlns:ng="http://angularjs.org"> <![endif]-->
<!--[if gt IE 9]><html xmlns:ng="http://angularjs.org"> <![endif]-->
<!--[if !IE]><!--><html xmlns:ng="http://angularjs.org"> <!--<![endif]-->
    <head>
        <!-- build:js scripts/combined-head.js -->
        <script src="../components/modernizr/modernizr.js"></script>
        <!-- endbuild -->
        <!--[if lte IE 8]>
        <script>
            document.createElement('ng-include');
            document.createElement('ng-pluralize');
            document.createElement('ng-view');
            document.createElement('ng-switch');
            document.createElement('accordion');
            document.createElement('accordion-group');
            document.createElement('interceptor');
            document.createElement('payments');
            document.createElement('paymentsprovided');
            document.createElement('user-settings');
            document.createElement('peoplepagesearch');
            document.createElement('people');
            document.createElement('mobbrbutton');
            document.createElement('tabs');
            document.createElement('pane');
            document.createElement('alert');
        </script>
        <![endif]-->
        <title>MOBBR Crowdpayment System</title>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
        <meta property="og:locale" content="en_US">
        <meta property="og:title" content="MOBBR crowdpayment system">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://mobbr.com">
        <meta property="og:image" content="https://mobbr.com/img/mobbr-ripple.jpg">
        <meta property="og:description" content="Welcome to MOBBR, the world's first crowdpayment system. Start sharing rewards and donations in bitcoin, XRP, social currencies and FIAT currencies.">
        <meta name="description" content="Welcome to MOBBR, the world's first crowdpayment system. Start sharing rewards and donations in bitcoin, XRP, social currencies and FIAT currencies.">
        <link href="//fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700" rel="stylesheet">
        <link href="//fonts.googleapis.com/css?family=Open+Sans+Condensed:300" rel="stylesheet">
        <!-- build:css ../styles/style-lightbox.css -->
        <link href="../styles/style-lightbox.css" rel="stylesheet">
        <!-- endbuild -->
    </head>
    <body ng-app="mobbr-lightbox" id="ng-app" ng-class="{ 'mobbr-test': isTest() !== -1, 'ng-app': true, 'loading': loading }" ng-controller="LightboxController" idle-timeout>
        <!--[if lt IE 8]>
        <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser
            today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better
            experience this site. {{showMobbrFrame}}</p>
        <![endif]-->
        <!-- build:js scripts/combined-ie.js -->
        <!--[if lt IE 9]>
        <script src="../components/es5-shim/es5-shim.js"></script>
        <script src="../components/json3/lib/json3.js"></script>
        <![endif]-->
        <!-- endbuild -->
        <div class="wrapper" ng-cloak>
            <div ng-show="marked == false">
                <h2 ng-bind="errormessage"></h2>
                <fieldset>
                    <legend>
                        Checklist for webmasters of <span ng-bind="json['url']"></span>
                    </legend>
                    <div class="error">
                        <ul>
                            <li>
                                The syntax of the script is invalid, use a JSON-validator
                                </br>&rarr; <a target="_blank" href="http://www.jsonlint.com/">http://www.jsonlint.com/</a>
                            </li>
                            <li>
                                The schema of the script is invalid, use the Mobbr script validator
                                </br>&rarr; <a target="_blank" href="/#/validate">#/validate</a>
                            </li>
                            <li>
                                Values are out-of-range , check the specifications
                                </br>&rarr; <a target="_blank" href="http://mobbr.com/protocol.html">http://mobbr.com/protocol.html</a>
                            </li>
                        </ul>
                        Visit <a href="/#/integration">the website</a> for instructions on using the buttons and widgets.
                    </div>
                </fieldset>
            </div>

            <div>
                <h2 style="margin: 0 0 15px 0" ng-show="dologin" ng-bind="$mobbrStorage.token && 'Logged in as: ' + $mobbrStorage.user.username || 'Login to Fast Moving Crowdwork'"></h2>
                <div ng-show="!(dologin && $mobbrStorage.token)" id="login_form">
                    <form name="login_form" autocomplete="off" class="form-inline lightboxform">
                        <fieldset ng-disabled="laterpaying || nowpaying">
                            <p class="loginerror alert alert-error" ng-show="loginerror">
                                Wrong email/password
                            </p>
                            <p class="loginerror alert alert-error" ng-show="customerror" ng-bind="customerror"></p>
                            <p ng-show="marked != false && !$mobbrStorage.token">
                                <input ng-model="email" ng-disabled="$mobbrStorage.token" required type="email" name="email" placeholder="email address" autocomplete="off" class="input-medium">
                                <input ng-model="password" ng-disabled="$mobbrStorage.token" required type="password" name="password" placeholder="password" autocomplete="off" class="input-medium">
                                <button ng-disabled="!email || !password" ng-click="login(login_form, true, false)" ng-show="dologin" class="btn btn-success">
                                    Login
                                </button>
                            </p>
                            <p id="newuser" ng-show="dologin || marked == undefined && !$mobbrStorage.token">
                                New user or forgotten password? &rarr; <a href="/#/join" target="_blank">Go here</a>
                            </p>
                            <span ng-show="!dologin && marked == undefined">
                                <select class="input-small"
                                        required
                                        ng-show="$mobbrStorage.token"
                                        ng-model="currency"
                                        ng-options="value.currency_iso for value in userCurrencies"
                                        ng-change="paymentChanged(payment)"></select>
                                <select class="input-small"
                                        required
                                        ng-show="!$mobbrStorage.token"
                                        ng-model="currency"
                                        ng-options="key as key for (key, value) in currenciesMap"
                                        ng-change="paymentChanged(payment)"></select>
                                <input class="input-small"
                                       required
                                       type="number"
                                       ng-model="amount"
                                       step="any"
                                       min="0"
                                       max="1000000000">
                                <button ng-disabled="nowpaying || laterpaying || (!$mobbrStorage.token && (!email || !password))"
                                        ng-show="!dologin"
                                        ng-click="performPayment(login_form)"
                                        class="btn btn-success">
                                    <span ng-bind="urlData.script.type"></span>
                                </button>
                            </span>
                        </fieldset>
                    </form>
                </div>
                <div ng-switch on="marked" ng-show="!dologin">
                    <div ng-switch-when="undefined">
                        <div class="well special" ng-bind="urlData.script.message || urlData.script.description"></div>
                        <accordion close-others="true">
                            <accordion-group is-open="false">
                                <accordion-heading>
                                    <span class="headlabel">Item:</span>
                                    <strong ng-show="!isOpen" ng-bind="urlData.script.title" class="itemtitle"></strong>
                                </accordion-heading>
                                <img ng-src="{{ urlData.script.image }}" class="pull-left" width="100">
                                <div ng-bind="urlData.script.description"></div>
                            </accordion-group>
                            <accordion-group class="nowrap-header" ng-show="!$parent.noscript && !$parent.noparticipants" is-open="false">
                                <accordion-heading>
                                    <span class="headlabel">Participants:</span>
                                    <ul class="inline gravatar-heading">
                                        <li ng-repeat="participant in urlData.script.participants">
                                            <img ng-src="https://secure.gravatar.com/avatar/{{ participant['.gravatar'] }}?s=20&default=https://mobbr.com/img/default-gravatar.png" class="img-rounded-small">
                                        </li>
                                    </ul>
                                </accordion-heading>
                                <mobbrtable entries="urlData.script.participants"
                                            columns="['.gravatar','.org-id','role','.percentage']"></mobbrtable>
                            </accordion-group>
                            <accordion-group is-open="false" ng-show="!noscript">
                                <accordion-heading>
                                    <span class="headlabel" ng-bind="(urlData.script.participants.length > 0 && 'History' || 'Pledged') + ':'"></span>
                                    <ul class="inline gravatar-heading">
                                        <li ng-repeat="balance in balances.result">
                                            <strong ng-bind="(balance.amount | currency:balance.currency_iso)"></strong>
                                        </li>
                                    </ul>
                                </accordion-heading>
                                <mobbrtable entries="persons.result"
                                            columns="[ 'gravatar-xsmall', 'username', 'role', 'currency_iso', 'amount' ]"></mobbrtable>
                            </accordion-group>
                        </accordion>
                    </div>
                    <div ng-switch-when="true">
                        <div ng-show="nowpayed">
                            <h2>Payment was completed!</h2>
                            <p>
                                All payments are including VAT. Invoices and receipts for payments can be found at your Mobbr account.
                            </p>
                            <p>
                                The recipient(s) will be notified. You may now close this window.
                            </p>
                            <p>
                                The buttons will be updated in a few minutes.
                            </p>
                        </div>
                        <div ng-show="laterpayed">
                            <h2>Registered for later payment!</h2>
                            <p>
                                These payments are collected <a target="_blank" href="/#/wallet">in your wallet</a>.
                                You can review them and make them final all at once every week or so. You may now close this window.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- build:js ../scripts/combined.js -->
        <script src="../components/base64/base64.js"></script>
        <script src="../components/angular/angular.js"></script>
        <script src="../components/angular-resource/angular-resource.js"></script>
        <script src="../components/mobbr-api-angular/mobbr-api.src.js"></script>
        <script src="../components/mobbr-api-angular/mobbr-api-msg.src.js"></script>
        <script src="../components/mobbr-api-angular/mobbr-api-session.src.js"></script>
        <script src="../components/angular-bootstrap/ui-bootstrap-tpls.js"></script>
        <script src="../components/angular-route/angular-route.js"></script>
        <script src="../components/js-md5/js/md5.js"></script>
        <script src="../components/ngstorage/ngStorage.js"></script>
        <script src="../scripts/config.js"></script>
        <!-- endbuild -->
        <!-- build:js ../scripts/mobbr-core.js -->
        <script src="../scripts/services/idleTimeout.js"></script>
        <!-- endbuild -->
        <!-- build:js ../scripts/mobbr-lightbox.js -->
        <script src="scripts/app.js"></script>
        <script src="../scripts/filters/mobbrcurrency.js"></script>
        <script src="../scripts/directives/decorateAmount.js"></script>
        <script src="../scripts/directives/placeholder.js"></script>
        <script src="../scripts/directives/mobbrtable.js"></script>
        <script src="scripts/controllers/LightboxController.js"></script>
        <!-- endbuild -->
    </body>
</html>
